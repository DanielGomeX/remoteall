<!DOCTYPE html>
<html>
<head>
    <title>RC - client and rc - RemoteAll example</title>
</head>
<body>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="../../../js/remoteall.js"></script>

<!--CHECK socket.io.js SERVER-->
<script src="http://remoteall.org:8888/socket.io/socket.io.js"></script>

<script>
    window.oncontextmenu = function() {
        return false;
    };
    $(".sel-key").on('oncontextmenu',function(e){
        return false;
    })

    /**
     * get hash in array
     */
    function getHashParams() {

        var hashParams = {};
        var e,
                a = /\+/g, // Regex for replacing addition symbol with a space
                r = /([^&;=]+)=?([^&;]*)/g,
                d = function (s) {
                    return decodeURIComponent(s.replace(a, " "));
                },
                q = window.location.hash.substring(1);

        while (e = r.exec(q))
            hashParams[d(e[1])] = d(e[2]);

        return hashParams;
    }


    var params = getHashParams();


    if (params.type == 'post') {
        //POST RC----------------------------------------------
        var data = null;
        var req_url = params.host + '/emit'

        $(document).ready(function () {

            var send_data = function (data) {
                jQuery.post(
                        req_url,
                        {
                            app:params.app,
                            session_id:params.session_id,
                            emit_data:JSON.stringify(data)
                        }
                )
            }

            $('#io_loader').hide();
            $('#rc').show();


            $(".sel-key").on("mousedown touchstart", function(event){
                data = {event_name:'button_down', button_code:$(this).data('button-code')};
                send_data(data);
                return false;
            });
            $(".sel-key").on("mouseup touchend", function(event){
                data = {event_name:'button_up', button_code:$(this).data('button-code')};
                send_data(data);
                return false;
            });

        })
    } else {
        //JS RC----------------------------------------------
        var REMOTE_ALL_CONFIG = {
            url:params.host,
            appId:params.app,
            uniqueSessionId:params.session_id

        }
        var ra = new remoteAll(REMOTE_ALL_CONFIG, function (context, args) {
            $('#io_loader').hide();
            $('#rc').show();
        });
        $(document).ready(function () {

            $(".sel-key").on("mousedown", function(event){
                ra.sendCode({event_name:'button_down', button_code:$(this).data('button-code')});
            });
            $(".sel-key").on("mouseup", function(event){
                ra.sendCode({event_name:'button_up', button_code:$(this).data('button-code')});
            });
        })
    }


</script>
<link rel="stylesheet" type="text/css" href="css/rc.css"/>

<div id="io_loader">Connecting...</div>
<div id="rc">
    <div id="rc_key_RIGHT" class="sel-key" data-button-code="RIGHT">
        <div class="selk-image selk-image_RIGHT"></div>
    </div>
    <div id="rc_key_LEFT" class="sel-key" data-button-code="LEFT">
        <div class="selk-image selk-image_LEFT"></div>
    </div>
    <div id="rc_key_DOWN" class="sel-key" data-button-code="DOWN">
        <div class="selk-image selk-image_DOWN"></div>
    </div>

    <div id="rc_key_UP" class="sel-key" data-button-code="UP">
        <div class="selk-image selk-image_UP"></div>
    </div>
    <div id="rc_key_ENTER" class="sel-key">
        <div class="selk-image selk-image_ENTER"></div>
    </div>
    <div id="rc_key_TOOLS" class="sel-key">
        <div class="selk-image selk-image_TOOLS"></div>
    </div>

    <div id="rc_key_RED" class="sel-key">
        <div class="selk-image selk-image_RED"></div>
    </div>
    <div id="rc_key_GREEN" class="sel-key">
        <div class="selk-image selk-image_GREEN"></div>
    </div>
    <div id="rc_key_YELLOW" class="sel-key">
        <div class="selk-image selk-image_YELLOW"></div>
    </div>
    <div id="rc_key_BLUE" class="sel-key">
        <div class="selk-image selk-image_BLUE"></div>
    </div>

</div>
</body>
</html>